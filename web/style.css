/* Базовые переменные оформления и типографика */
:root{
  --maxw: 88rem; --gap: 1rem; --r: 14px;
  --bg: #fff; --card:#fff; --ink:#0a0a0a; --muted:#6b7280;
  --brand:#2563eb; --ok:#10b981; --err:#ef4444;
  --shadow: 0 1px 2px rgba(0,0,0,.06), 0 6px 24px rgba(0,0,0,.08);
}
@media (prefers-color-scheme: dark){
  :root{ --bg:#0b0b0d; --card:#0f1012; --ink:#e5e7eb; --muted:#9ca3af; }
}
html{color-scheme:light dark}
body{margin:0;background:var(--bg);color:var(--ink);
     font:400 16px/1.55 system-ui, -apple-system, Segoe UI, Roboto, sans-serif}
.container{max-width:var(--maxw);margin:0 auto;padding:0 12px}
h1,h2{line-height:1.1}

/* Сетка IDE: три панели на десктопе, степпер на мобиле */
.ide{display:grid;grid-template-columns:1.1fr 1.6fr 1.3fr;gap:var(--gap);margin:12px 0 80px}
.card{background:var(--card);border-radius:var(--r);box-shadow:var(--shadow);padding:12px}
#prompt{min-height:160px}
#editor,#stream{min-height:320px}
@media (max-width: 900px){
  .ide{grid-template-columns:1fr}
  .pane{display:none}
  .pane[data-active="1"]{display:block}
}

/* Нижний степпер для мобильной навигации и безопасные зоны */
.stepper{
  position:fixed;left:0;right:0;bottom:0;
  padding:8px max(8px, env(safe-area-inset-right)) calc(8px + env(safe-area-inset-bottom)) max(8px, env(safe-area-inset-left));
  display:grid;grid-template-columns:repeat(3,1fr);gap:6px;background:var(--card);
  border-top:1px solid rgba(0,0,0,.08)
}
.stepper a{display:flex;justify-content:center;align-items:center;height:44px;border-radius:10px;color:var(--muted);text-decoration:none}
.stepper a[aria-selected="true"]{color:var(--ink);font-weight:600;background:color-mix(in oklab, var(--ink) 6%, transparent)}

/* Кнопки, поля и дифф */
.btn{display:inline-flex;align-items:center;gap:.5rem;padding:.6rem .9rem;border-radius:10px;border:1px solid color-mix(in oklab,var(--ink) 12%,transparent);background:transparent}
.btn-primary{background:var(--brand);color:#fff;border-color:transparent}
textarea, input, select{width:100%;min-height:44px;border-radius:10px;border:1px solid color-mix(in oklab,var(--ink) 12%,transparent);background:transparent;color:inherit;padding:.6rem .7rem}
pre, code{font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size: 13px}
.diff .ins{background:rgba(16,185,129,.18)}
.diff .del{background:rgba(239,68,68,.18); text-decoration:line-through}

/* Анимации и доступность */
:focus-visible{outline:2px solid var(--brand);outline-offset:2px;border-radius:8px}
@media (prefers-reduced-motion: reduce){*{animation:none!important;transition:none!important}}
